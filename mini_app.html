<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBQ - Telegram Mini App</title>
    <style>
        :root {
            --tg-theme-bg-color: #efeff3;
            --tg-theme-text-color: #000000;
            --tg-theme-button-color: #4CAF50;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            transition: background 0.3s;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            margin: 0;
            color: #FF5722;
        }
        
        .menu-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 100px;
        }
        
        .menu-item {
            background: white;
            border-radius: 15px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        
        .menu-item:hover {
            transform: translateY(-2px);
        }
        
        .item-info h3 {
            margin: 0 0 5px 0;
            color: #333;
        }
        
        .item-info p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }
        
        .price {
            font-weight: bold;
            color: #4CAF50;
            font-size: 18px;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .qty-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: #4CAF50;
            color: white;
            font-size: 18px;
            cursor: pointer;
        }
        
        .quantity {
            font-weight: bold;
            min-width: 20px;
            text-align: center;
        }
        
        .cart-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .cart-info {
            font-weight: bold;
        }
        
        .checkout-btn {
            background: var(--tg-theme-button-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .checkout-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .checkout-modal {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            animation: slideUp 0.3s;
            z-index: 1000;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
        }
        
        /* Telegram —Å—Ç–∏–ª–∏ */
        .tg-theme-dark body {
            --tg-theme-bg-color: #1c1c1d;
            --tg-theme-text-color: #ffffff;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçñ BBQ –†–µ—Å—Ç–æ—Ä–∞–Ω</h1>
            <p>–ó–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—Ä—è–º–æ –≤ Telegram!</p>
        </div>
        
        <div class="menu-grid" id="menu">
            <!-- –ú–µ–Ω—é –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ —á–µ—Ä–µ–∑ JS -->
        </div>
        
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-info">
                <span id="cartCount">0</span> —Ç–æ–≤–∞—Ä–æ–≤ ¬∑ <span id="cartTotal">0</span> ‚ÇΩ
            </div>
            <button class="checkout-btn" onclick="openCheckout()">
                üöÄ –û—Ñ–æ—Ä–º–∏—Ç—å
            </button>
        </div>
    </div>
    
    <div class="checkout-modal" id="checkoutModal" style="display: none;">
        <h3>üìù –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
        <div class="form-group">
            <input type="text" id="address" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">
        </div>
        <div class="form-group">
            <input type="tel" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
        </div>
        <button class="checkout-btn" onclick="submitOrder()" style="width: 100%;">
            ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –≤ Telegram
        </button>
        <button onclick="closeCheckout()" style="width: 100%; margin-top: 10px; background: #f5f5f5; color: #333;">
            –û—Ç–º–µ–Ω–∞
        </button>
    </div>
    
    <script>
        // Telegram Web App API
        const tg = window.Telegram.WebApp;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        tg.expand(); // –†–∞—Å–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.MainButton.setText("–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"); // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
        tg.MainButton.hide();
        
        // –ú–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
        const menuItems = [
            { id: 1, name: "üçï –ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞", price: 450, desc: "–ú–æ—Ü–∞—Ä–µ–ª–ª–∞, —Ç–æ–º–∞—Ç—ã" },
            { id: 2, name: "üçï –ü–∏—Ü—Ü–∞ –ü–µ–ø–ø–µ—Ä–æ–Ω–∏", price: 550, desc: "–û—Å—Ç—Ä–∞—è –∫–æ–ª–±–∞—Å–∫–∞" },
            { id: 3, name: "üçñ –°—Ç–µ–π–∫ –†–∏–±–∞–π", price: 890, desc: "300–≥, medium rare" },
            { id: 4, name: "ü•§ Cola 0.5–ª", price: 150, desc: "–û—Å–≤–µ–∂–∞—é—â–∏–π –Ω–∞–ø–∏—Ç–æ–∫" }
        ];
        
        // –ö–æ—Ä–∑–∏–Ω–∞
        let cart = {};
        let total = 0;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            renderMenu();
            updateCartUI();
        });
        
        // –†–µ–Ω–¥–µ—Ä–∏–º –º–µ–Ω—é
        function renderMenu() {
            const menuContainer = document.getElementById('menu');
            menuContainer.innerHTML = '';
            
            menuItems.forEach(item => {
                const div = document.createElement('div');
                div.className = 'menu-item';
                div.innerHTML = `
                    <div class="item-info">
                        <h3>${item.name}</h3>
                        <p>${item.desc}</p>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                            <span class="quantity" id="qty-${item.id}">0</span>
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                        </div>
                    </div>
                    <div class="price">${item.price} ‚ÇΩ</div>
                `;
                menuContainer.appendChild(div);
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
        function updateQuantity(itemId, delta) {
            if (!cart[itemId]) {
                cart[itemId] = 0;
            }
            
            cart[itemId] += delta;
            
            if (cart[itemId] < 0) {
                cart[itemId] = 0;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            document.getElementById(`qty-${itemId}`).textContent = cart[itemId];
            updateCartUI();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
        function updateCartUI() {
            // –ü–æ–¥—Å—á–µ—Ç
            let count = 0;
            total = 0;
            
            for (const itemId in cart) {
                if (cart[itemId] > 0) {
                    count += cart[itemId];
                    const item = menuItems.find(i => i.id == itemId);
                    total += cart[itemId] * item.price;
                }
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
            document.getElementById('cartCount').textContent = count;
            document.getElementById('cartTotal').textContent = total;
            
            const cartFooter = document.getElementById('cartFooter');
            if (count > 0) {
                cartFooter.style.display = 'flex';
                tg.MainButton.show();
            } else {
                cartFooter.style.display = 'none';
                tg.MainButton.hide();
            }
        }
        
        // –û—Ç–∫—Ä—ã—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
        function openCheckout() {
            document.getElementById('checkoutModal').style.display = 'block';
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ
        function closeCheckout() {
            document.getElementById('checkoutModal').style.display = 'none';
        }
        
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –≤ Telegram
        function submitOrder() {
            const address = document.getElementById('address').value.trim();
            const phone = document.getElementById('phone').value.trim();
            
            if (!address || !phone) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–¥—Ä–µ—Å –∏ —Ç–µ–ª–µ—Ñ–æ–Ω');
                return;
            }
            
            if (total === 0) {
                alert('–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É');
                return;
            }
            
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞
            const orderItems = [];
            for (const itemId in cart) {
                if (cart[itemId] > 0) {
                    const item = menuItems.find(i => i.id == itemId);
                    orderItems.push({
                        id: itemId,
                        name: item.name,
                        price: item.price,
                        quantity: cart[itemId]
                    });
                }
            }
            
            const orderData = {
                address: address,
                phone: phone,
                items: orderItems,
                total: total,
                timestamp: new Date().toISOString()
            };
            
            console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞:', orderData);
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
            tg.sendData(JSON.stringify(orderData));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
            alert('üéâ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ —á–∞—Ç.');
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º Mini App
            tg.close();
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ Telegram
        tg.MainButton.onClick(submitOrder);
        
        // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ç–µ–º—É Telegram
        if (tg.colorScheme === 'dark') {
            document.body.classList.add('tg-theme-dark');
        }
    </script>
</body>
</html>